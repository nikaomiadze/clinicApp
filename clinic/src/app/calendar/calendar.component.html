<div class="month_year">
  <div class="year"><h2>{{ currentYear }}</h2></div>
  <div class="month">
    <button (click)="prevMonth()"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
      <path d="M5.32305 12.3083L0.408464 7.40833C0.35013 7.35 0.308908 7.28681 0.284797 7.21875C0.260297 7.1507 0.248047 7.07778 0.248047 7C0.248047 6.92222 0.260297 6.84931 0.284797 6.78125C0.308908 6.7132 0.35013 6.65 0.408464 6.59167L5.32305 1.67708C5.45916 1.54097 5.6293 1.47292 5.83346 1.47292C6.03763 1.47292 6.21263 1.54583 6.35846 1.69167C6.5043 1.8375 6.57721 2.00764 6.57721 2.20208C6.57721 2.39653 6.5043 2.56667 6.35846 2.7125L2.07096 7L6.35846 11.2875C6.49457 11.4236 6.56263 11.5912 6.56263 11.7903C6.56263 11.9898 6.48971 12.1625 6.34388 12.3083C6.19805 12.4542 6.02791 12.5271 5.83346 12.5271C5.63902 12.5271 5.46888 12.4542 5.32305 12.3083Z" fill="#053354"/>
    </svg></button>
    <h2>{{ currentMonth }}</h2>
    <button (click)="nextMonth()"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
      <path d="M8.67695 1.69166L13.5915 6.59167C13.6499 6.65 13.6911 6.71319 13.7152 6.78125C13.7397 6.8493 13.752 6.92222 13.752 7C13.752 7.07778 13.7397 7.15069 13.7152 7.21875C13.6911 7.2868 13.6499 7.35 13.5915 7.40833L8.67695 12.3229C8.54084 12.459 8.3707 12.5271 8.16654 12.5271C7.96237 12.5271 7.78737 12.4542 7.64154 12.3083C7.4957 12.1625 7.42279 11.9924 7.42279 11.7979C7.42279 11.6035 7.4957 11.4333 7.64154 11.2875L11.929 7L7.64154 2.7125C7.50543 2.57639 7.43737 2.40878 7.43737 2.20966C7.43737 2.01016 7.51029 1.8375 7.65612 1.69166C7.80195 1.54583 7.97209 1.47291 8.16654 1.47291C8.36098 1.47291 8.53112 1.54583 8.67695 1.69166Z" fill="#053354"/>
    </svg></button>

</div>
</div>
  <table class="calendar-table">
    <thead>
      <tr>
        <th>
          <div class="week_btn">
          <div><button (click)="previousWeek()"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
            <path d="M4.5624 10.55L0.349902 6.35C0.299902 6.3 0.264569 6.24583 0.243902 6.1875C0.222902 6.12916 0.212402 6.06666 0.212402 6C0.212402 5.93333 0.222902 5.87083 0.243902 5.8125C0.264569 5.75416 0.299902 5.7 0.349902 5.65L4.5624 1.4375C4.67907 1.32083 4.8249 1.2625 4.9999 1.2625C5.1749 1.2625 5.3249 1.325 5.4499 1.45C5.5749 1.575 5.6374 1.72083 5.6374 1.8875C5.6374 2.05416 5.5749 2.2 5.4499 2.325L1.7749 6L5.4499 9.675C5.56657 9.79167 5.6249 9.93533 5.6249 10.106C5.6249 10.277 5.5624 10.425 5.4374 10.55C5.3124 10.675 5.16657 10.7375 4.9999 10.7375C4.83324 10.7375 4.6874 10.675 4.5624 10.55Z" fill="#053354"/>
          </svg></button ></div>
          <div><button (click)="nextWeek()"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
            <path d="M7.4376 1.45L11.6501 5.65C11.7001 5.7 11.7354 5.75417 11.7561 5.8125C11.7771 5.87084 11.7876 5.93334 11.7876 6C11.7876 6.06667 11.7771 6.12917 11.7561 6.1875C11.7354 6.24584 11.7001 6.3 11.6501 6.35L7.4376 10.5625C7.32093 10.6792 7.1751 10.7375 7.0001 10.7375C6.8251 10.7375 6.6751 10.675 6.5501 10.55C6.4251 10.425 6.3626 10.2792 6.3626 10.1125C6.3626 9.94584 6.4251 9.8 6.5501 9.675L10.2251 6L6.5501 2.325C6.43343 2.20833 6.3751 2.06467 6.3751 1.894C6.3751 1.723 6.4376 1.575 6.5626 1.45C6.6876 1.325 6.83343 1.2625 7.0001 1.2625C7.16676 1.2625 7.3126 1.325 7.4376 1.45Z" fill="#053354"/>
          </svg></button></div>
          </div>
        </th>
        <th [ngClass]="{ 'past-date': isPastDate(day) }" *ngFor="let day of currentWeek">
          <span class="day_number">{{day.date}} </span><span class="day_name">{{day.day}}</span>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let hour of hours">
        <td>{{ hour }}</td>
        <td *ngFor="let day of currentWeek">
          <button 
          *ngIf="roleId === '1'"
          class="booking-btn" 
          [class.reserved]="isButtonReserved(day.date, hour)"
          [class.weekend]="isWeekend(day)"
          [class.user-booking]="isUserBooking(day.date, hour)"  
          [disabled]="isButtonReserved(day.date, hour) || isWeekend(day)"
          (click)="openModal($event, day, hour)">
          {{ isUserBooking(day.date, hour) ? 'ჩემი ჯავშანი' : (isButtonReserved(day.date, hour) ? '' : '+ დაჯავშნა') }}
        </button>
        <button 
        *ngIf="roleId === '3'"
        class="booking-btn" 
        [class.Reserved]="isButtonReserved(day.date, hour)"
        [class.weekend]="isWeekend(day)"
        [disabled]="isButtonReserved(day.date, hour) || isWeekend(day)">
        {{ isButtonReserved(day.date, hour) ? 'დაჯავშნილია' : '' }}

      </button> 
      <button
      *ngIf="isUserBooking(day.date, hour)"
      class="delete-btn"
      (click)="deleteReservation(isUserBooking(day.date, hour)?.reservationId)">
    <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8" fill="none">
        <path d="M1 1L7 7" stroke="#FF2C52"/>
        <path d="M1 7L7 1" stroke="#FF2C52"/>
      </svg>
        </button>      
        </td>
      </tr>
    </tbody>   
  </table>
<div 
class="modal" 
[ngStyle]="{'top.px': modalPosition.top, 'left.px': modalPosition.left, 'display': showModal ? 'block' : 'none'}">
<div class="modal-content">
  <div class="modal-title">
    <div>
      <h3>გსურთ ვიზიტის დაჯავშნა?</h3>
    </div>
    <div> 
      <label for="description">შეგიძლიათ მიუთითოთ თქვენი პრობლემა</label>    
</div>
</div>
  <div class="textarea"><textarea id="description" [(ngModel)]="reservationDescription" placeholder="აღწერა..."></textarea></div>
  <div class="booking-button"><button (click)="submitReservation()">დაჯავშნა</button>
  </div>
</div>
</div>


